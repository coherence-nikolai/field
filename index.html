<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>field</title>
<style>
:root{
  --bg1:#071516;
  --bg2:#0e2423;

  --card1:rgba(14,40,40,0.90);
  --card2:rgba(5,20,20,0.90);

  --mint:#7ef5b5;
  --mint2:#9fffcf;

  --header:#e6f1ee;
  --soft:rgba(230,241,238,0.70);

  --circleText:#063a2b;
  --shadow: rgba(0,0,0,0.55);
}

*{ box-sizing:border-box; margin:0; padding:0; }
body{
  min-height:100vh;
  background:
    radial-gradient(circle at top, #143332, var(--bg1)),
    linear-gradient(var(--bg1), var(--bg2));
  display:flex;
  justify-content:center;
  align-items:center;
  color:var(--header);
  font-family: Georgia, "Times New Roman", serif;
}

.wrapper{
  width:100%;
  max-width:420px;
  padding: 40px 20px 60px;
  text-align:center;
}

/* Header wordmark constrained to circle width */
.header{
  width: 210px;          /* matches circle size */
  margin: 0 auto 34px;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  font-weight:400;
  font-size: 3.6rem;
  letter-spacing: 0;
  color: var(--header);
  transition: opacity 900ms ease;
}
.header span{
  display:inline-block;
  line-height:1;
}

/* card */
.card{
  background: linear-gradient(160deg, var(--card1), var(--card2));
  border-radius: 26px;
  padding: 40px 25px 38px;
  box-shadow: 0 30px 60px var(--shadow);
}

/* circle + ripple */
.circleWrap{
  position:relative;
  width:210px;
  height:210px;
  margin: 0 auto 22px;
}

.circle{
  width:210px;
  height:210px;
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, var(--mint2), var(--mint));
  display:flex;
  align-items:center;
  justify-content:center;
  font-family: Arial, system-ui, sans-serif;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  font-size: 0.75rem;
  color: var(--circleText);
  box-shadow: 0 0 52px rgba(126,245,181,0.52);
  cursor:pointer;
  user-select:none;
  transition: box-shadow 900ms ease, filter 900ms ease;
}

/* breathing motion */
.circle.breathing{
  animation: breathe 11s ease-in-out infinite;
}
@keyframes breathe{
  0%{ transform: scale(0.84); }
  50%{ transform: scale(1.00); }
  100%{ transform: scale(0.84); }
}

/* subtle phase glow shift (still silent: no label changes required) */
.circle.phase-in{
  box-shadow: 0 0 58px rgba(126,245,181,0.60);
  filter: brightness(1.02);
}
.circle.phase-out{
  box-shadow: 0 0 44px rgba(126,245,181,0.42);
  filter: brightness(0.99);
}

/* start ripple */
.ripple{
  position:absolute;
  inset:0;
  border-radius:50%;
  border: 1px solid rgba(126,245,181,0.0);
  transform: scale(0.86);
  opacity:0;
  pointer-events:none;
}
.ripple.go{
  animation: ripple 1100ms ease-out 1;
}
@keyframes ripple{
  0%{
    opacity:0.55;
    transform: scale(0.86);
    border-color: rgba(126,245,181,0.35);
  }
  100%{
    opacity:0;
    transform: scale(1.22);
    border-color: rgba(126,245,181,0.0);
  }
}

/* intention */
.intent{
  color: var(--header);
  font-weight: 400;
  font-size: 1.65rem;          /* slightly smaller */
  line-height: 1.1;
  margin: 18px 0 8px;
  cursor:pointer;
  user-select:none;

  white-space: nowrap;
  overflow: visible;           /* never clip */
  transition: opacity 420ms ease;
}
.intent.pulse{
  text-shadow: 0 0 14px rgba(126,245,181,0.18);
}
.sub{
  font-size: 0.92rem;
  color: var(--soft);
  margin-bottom: 22px;
  transition: opacity 420ms ease;
}

/* fade intention during session (silent mode) */
.running .intent,
.running .sub{
  opacity: 0;
  pointer-events:none;
}

/* single toggle button */
.controls{ display:flex; justify-content:center; margin-top: 6px; }
button{
  border:none;
  border-radius: 999px;
  padding: 12px 30px;
  font-size: 1rem;
  cursor:pointer;
  color: #063a2b;
  background: linear-gradient(135deg, #6deeb0, var(--mint));
  box-shadow: 0 6px 18px rgba(126,245,181,0.36);
  transition: transform 140ms ease, filter 140ms ease, opacity 140ms ease;
}
button:active{ transform: scale(0.99); }
button:hover{ filter: brightness(1.02); }

/* small screens: keep header & intent fitting */
@media (max-width: 360px){
  .header{ width: 200px; font-size: 3.25rem; }
  .circleWrap,.circle{ width:200px; height:200px; }
  .intent{ font-size: 1.52rem; }
}
</style>
</head>
<body>
  <div class="wrapper" id="app">
    <div class="header" id="header" aria-label="field wordmark">
      <span>f</span><span>i</span><span>e</span><span>l</span><span>d</span>
    </div>

    <div class="card">
      <div class="circleWrap">
        <div class="ripple" id="ripple"></div>
        <div class="circle" id="circle">TAP TO BEGIN</div>
      </div>

      <div class="intent" id="intent" tabindex="0">Equanimity and awareness</div>
      <div class="sub" id="sub">the field is shared.</div>

      <div class="controls">
        <button id="toggleBtn" type="button">Start</button>
      </div>
    </div>
  </div>

<script>
(() => {
  'use strict';

  // Breath timing (stabiliser default)
  const IN_SEC  = 5.5;
  const OUT_SEC = 5.5;

  const INTENTIONS = [
    "Equanimity and awareness",
    "Steady and open",
    "Soft and spacious",
    "Let it arrive",
    "Nothing to fix",
    "Here, now",
    "Be the field",
    "Rest in the field",
    "Clear and kind"
  ];

  const app       = document.getElementById('app');
  const header    = document.getElementById('header');
  const circle    = document.getElementById('circle');
  const ripple    = document.getElementById('ripple');
  const toggleBtn = document.getElementById('toggleBtn');
  const intentEl  = document.getElementById('intent');

  let running = false;
  let intentIndex = 0;

  // Phase timer (for glow only; silent mode keeps text static)
  let phaseTimeoutA = null;
  let phaseTimeoutB = null;

  function clearPhaseTimers(){
    if (phaseTimeoutA) { clearTimeout(phaseTimeoutA); phaseTimeoutA = null; }
    if (phaseTimeoutB) { clearTimeout(phaseTimeoutB); phaseTimeoutB = null; }
  }

  function setGlowPhase(phase){
    circle.classList.remove('phase-in','phase-out');
    circle.classList.add(phase === 'in' ? 'phase-in' : 'phase-out');
  }

  function startPhaseLoop(){
    clearPhaseTimers();

    // Align phase glow to the same 11s loop: IN then OUT
    setGlowPhase('in');
    phaseTimeoutA = setTimeout(() => {
      setGlowPhase('out');
      phaseTimeoutB = setTimeout(() => {
        if (running) startPhaseLoop();
      }, OUT_SEC * 1000);
    }, IN_SEC * 1000);
  }

  function forceRestartAnimation(el, cls){
    // Ensures animation starts from 0 each time (prevents drift)
    el.classList.remove(cls);
    void el.offsetWidth;
    el.classList.add(cls);
  }

  function startSession(){
    if (running) return;
    running = true;

    app.classList.add('running');
    header.style.opacity = '0.25';

    // Ripple once on start
    ripple.classList.remove('go');
    void ripple.offsetWidth;
    ripple.classList.add('go');

    // Start breathing animation (from 0)
    forceRestartAnimation(circle, 'breathing');

    // Silent mode: remove label while running
    circle.textContent = '';

    // Start glow phase loop (silent)
    startPhaseLoop();

    toggleBtn.textContent = 'Stop';
  }

  function stopSession(){
    running = false;

    app.classList.remove('running');
    header.style.opacity = '1';

    clearPhaseTimers();
    circle.classList.remove('breathing','phase-in','phase-out');

    circle.textContent = 'TAP TO BEGIN';
    toggleBtn.textContent = 'Start';
  }

  function toggleSession(){
    running ? stopSession() : startSession();
  }

  function fadeIntentTo(text){
    // fade + tiny pulse (only when NOT running)
    intentEl.style.opacity = '0';
    intentEl.classList.remove('pulse');
    setTimeout(() => {
      intentEl.textContent = text;
      intentEl.style.opacity = '1';
      intentEl.classList.add('pulse');
      setTimeout(() => intentEl.classList.remove('pulse'), 520);
    }, 220);
  }

  function nextIntent(){
    if (running) return; // silent during session
    intentIndex = (intentIndex + 1) % INTENTIONS.length;
    fadeIntentTo(INTENTIONS[intentIndex]);
  }

  // Events
  toggleBtn.addEventListener('click', toggleSession);
  circle.addEventListener('click', () => { if (!running) startSession(); });

  intentEl.addEventListener('click', nextIntent);
  intentEl.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      nextIntent();
    }
  });

  // Safety: prevent timer pile-up on tab backgrounding
  document.addEventListener('visibilitychange', () => {
    if (document.hidden && running) {
      clearPhaseTimers();
    } else if (!document.hidden && running) {
      startPhaseLoop();
    }
  });

})();
</script>
</body>
</html>
